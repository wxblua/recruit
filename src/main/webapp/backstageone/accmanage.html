<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/bootstrap.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-1.9.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/home.css">
    <script src="js/vue.min.js"></script>
    <script src="../reception/style/js/ajaxfileupload.js"></script>
    <!--<script src="js/up.js"></script>-->

</head>
<body>

<!--企业账户信息-->
<div class="container">
    <div class="row clearfix">
        <div class="col-md-12 column">
            <div class="tabbable" id="tabs-337096">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#panel-834539" data-toggle="tab">公司信息</a>
                    </li>
                    <li>
                        <a href="#panel-701692" data-toggle="tab">资质认证</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active" id="panel-834539">
                        <p>


                            <!--公司信息-->
                            <div class="container">
                                <div class="row clearfix">
                                    <div class="col-md-12 column">
                                        <center><h4>公司信息</h4></center>
                                        <form class="form-horizontal" role="form" enctype="multipart/form-data" action="" method="post">

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">公司名称：</label>
                                                <div class="col-sm-8" id="companyname">
                                                    <input class="form-control" v-for="epnameAlias in epnameParam" id="epname" name="epname" v-bind:value="epnameAlias.epname"/>
                                                </div>
                                            </div>
                                            <script>
                                                new Vue({
                                                    el:"#companyname",
                                                    data:{
                                                        epnameParam:[]
                                                    },
                                                    created:function(){
                                                        var epnamsAlias=this;
                                                        $.post("../enterprise/queryAllEnterprise",{},function(data){
                                                            epnamsAlias.epnameParam=data;
                                                        })
                                                    }
                                                })
                                            </script>
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">创始人：</label>
                                                <div class="col-sm-8" id="originators">
                                                    <input v-for="originatorsAlias in originatorsParam"  v-bind:value="originatorsAlias.originator" class="form-control" id="originator" />
                                                </div>
                                            </div>
                                            <script>
                                                new Vue({
                                                    el:"#originators",
                                                    data:{
                                                        originatorsParam:[]
                                                    },
                                                    created:function(){
                                                        var originatorAlias=this;
                                                        $.post("../enterprise/queryAllEnterprise",{},function(data){
                                                            originatorAlias.originatorsParam=data;
                                                        })
                                                    }
                                                })
                                            </script>
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">联系人号码：</label>
                                                <div class="col-sm-8" id="epphones">
                                                    <input v-for="epphonesAlias in epphonesParam"  v-bind:value="epphonesAlias.epphone" class="form-control" id="epphone"/>
                                                </div>
                                            </div>
                                            <script>
                                                new Vue({
                                                    el:"#epphones",
                                                    data:{
                                                        epphonesParam:[]
                                                    },
                                                    created:function(){
                                                        var epphoneAlias=this;
                                                        $.post("../enterprise/queryAllEnterprise",{},function(data){
                                                            epphoneAlias.epphonesParam=data;
                                                        })
                                                    }
                                                })
                                            </script>
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">公司邮箱：</label>
                                                <div class="col-sm-8" id="epemails">
                                                    <input v-for="epemailsAlias in epemailsParam"  v-bind:value="epemailsAlias.epemail" class="form-control" id="epemail"/>
                                                </div>
                                            </div>
                                            <script>
                                                new Vue({
                                                    el:"#epemails",
                                                    data:{
                                                        epemailsParam:[]
                                                    },
                                                    created:function(){
                                                        var epemailAlias=this;
                                                        $.post("../enterprise/queryAllEnterprise",{},function(data){
                                                            epemailAlias.epemailsParam=data;
                                                        })
                                                    }
                                                })
                                            </script>
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">账户密码：</label>
                                                <div class="col-sm-8" id="eppwds">
                                                    <input type="password" v-for="eppwdsAlias in eppwdsParam"  v-bind:value="eppwdsAlias.eppwd" class="form-control" id="eppwd"/>
                                                </div>
                                            </div>
                                            <script>
                                                new Vue({
                                                    el:"#eppwds",
                                                    data:{
                                                        eppwdsParam:[]
                                                    },
                                                    created:function(){
                                                        var eppwdAlias=this;
                                                        $.post("../enterprise/queryAllEnterprise",{},function(data){
                                                            eppwdAlias.eppwdsParam=data;
                                                        })
                                                    }
                                                })
                                            </script>
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">公司地址：</label>
                                                <div class="col-sm-8" id="cyaddresses">
                                                    <input v-for="cyaddressesAlias in cyaddressesParam"  v-bind:value="cyaddressesAlias.cyaddress" class="form-control" id="cyaddress"/>
                                                </div>
                                            </div>
                                            <script>
                                                new Vue({
                                                    el:"#cyaddresses",
                                                    data:{
                                                        cyaddressesParam:[]
                                                    },
                                                    created:function(){
                                                        var cyaddressAlias=this;
                                                        $.post("../enterprise/queryAllEnterprise",{},function(data){
                                                            cyaddressAlias.cyaddressesParam=data;
                                                        })
                                                    }
                                                })
                                            </script>
                                            <div class="form-group ">
                                                <label class="col-sm-2 control-label">公司类型：</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" id="companytype">
                                                        <option>请选择</option>
                                                        <option v-for="(companytypeAlias,index) in companytypeParam" v-bind:value="index+1">{{companytypeAlias.ctypename}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group ">
                                                <label class="col-sm-2 control-label">行业类型：</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" id="industrytype">
                                                        <option>请选择</option>
                                                        <option v-for="(industrytypeAlias,index) in industrytypeParam" v-bind:value="index+1">{{industrytypeAlias.itypename}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group ">
                                                <label class="col-sm-2 control-label">公司规模：</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" id="companyscale">
                                                        <option>请选择</option>
                                                        <option v-for="(companyscaleAlias,index) in companyscaleParam" v-bind:value="index+1">{{companyscaleAlias.cpcalename}}</option>
                                                    </select>
                                                </div>
                                            </div>


                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">公司简介：</label>
                                                <div class="col-sm-8" id="synopsises">
                                                    <textarea v-for="synopsisesAlias in synopsisesParam"  v-bind:value="synopsisesAlias.synopsis" class="form-control" rows="3" id="synopsis"></textarea>
                                                </div>
                                            </div>
                                            <script>
                                                new Vue({
                                                    el:"#synopsises",
                                                    data:{
                                                        synopsisesParam:[]
                                                    },
                                                    created:function(){
                                                        var synopsisAlias=this;
                                                        $.post("../enterprise/queryAllEnterprise",{},function(data){
                                                            synopsisAlias.synopsisesParam=data;
                                                        })
                                                    }
                                                })
                                            </script>



                                            <div class="form-group">
                                                <div class="col-sm-offset-2 col-sm-10">
                                                    <button type="submit" class="btn btn-default">更新</button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>

                                </div>
                            </div>

                        </p>
                    </div>


                    <div class="tab-pane" id="panel-701692">
                        <p>
                        <div class="container">
                            <div class="row clearfix">
                                <div class="col-md-12 column">
                                    <center><h4>个人资质认证</h4></center>
                                    <form class="form-horizontal" role="form">
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">个人资质认证：</label>
                                            <div class="col-sm-8" id="epstates">
                                                <p v-for="epstatesAlias in epstatesParam">
                                                <span v-if="epstatesAlias.epstate==1">
                                                    已通过
                                                </span>
                                                <span v-if="epstatesAlias.epstate==2">
                                                    未通过
                                                </span>
                                                </p>
                                            </div>
                                        </div>
                                        <script>
                                            new Vue({
                                                el:"#epstates",
                                                data:{
                                                    epstatesParam:[1]
                                                },
                                                created:function(){
                                                    var epstate=this;
                                                    $.post("../enterprise/queryAllEnterprise",{},function(data){
                                                        epstate.epstatesParam=data;
                                                    })
                                                }
                                            })
                                        </script>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">公司证书：</label>
                                            <div class="col-sm-8">
                                                <!--文件上传-->
                                                <div class="aui-form-group clear">
                                                    <div class="aui-photo aui-up-img clear">
                                                        <section class="aui-file-up fl">
                                                            <img src="img/up.png" class="add-img">
                                                            <!--<img src="" id="as" width="200" height="200"/>-->
                                                            <input type="file" name="file" id="file" class="file" value="" />
                                                        </section>
                                                    </div>
                                                </div>
                                                <div class="aui-mask aui-works-mask">
                                                    <div class="aui-mask-content">
                                                        <p class="aui-delete-text">确定要删除你上传的资料？</p>
                                                        <p class="aui-check-text">
                                                            <span class="aui-delete aui-accept-ok">确定</span>
                                                            <span class="aui-accept-no">取消</span>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-sm-offset-2 col-sm-10">
                                                <button type="submit" class="btn btn-default" onclick="btn_upload()">上传</button>
                                            </div>
                                        </div>

                                        <script>
                                            function btn_upload(){
                                                alert($("#file").val());
                                                $.ajaxFileUpload({  //Jquery插件上传文件
                                                    url: '../enterprise/updateUpload',
                                                    secureuri: false,//是否启用安全提交  默认为false
                                                    fileElementId: "file", //type="file"的id
                                                    dataType: "json",  //返回值类型
                                                    data:{
                                                        file:$("#file").val()
                                                    },
                                                    success: function (data){
                                                        if(data){//上传成功
                                                            alert("上传成功！");
                                                        }else{
                                                            alert("上传失败。。");
                                                        }

                                                    },

                                                });

                                            }
                                        </script>
                                    </form>
                                </div>
                            </div>
                        </div>

                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    /*公司类型*/
    new Vue({
        el:"#companytype",
        data:{
            companytypeParam:[]
        },
        created:function(){
            var companytypeAlias=this;
            $.ajax({
                url:"../enterprise/queryCompanytype",
                type:"post",
                dataType:"json",
                success:function (data) {
                    companytypeAlias.companytypeParam=data
                    console.log(data)
                }
            })
        }
    })
    /*行业类型*/
    new Vue({
        el:"#industrytype",
        data:{
            industrytypeParam:[]
        },
        created:function(){
            var industrytypeAlias=this;
            $.ajax({
                url:"../enterprise/queryIndustrytype",
                type:"post",
                dataType:"json",
                success:function (data) {
                    industrytypeAlias.industrytypeParam=data
                    console.log(data)
                }
            })
        }
    })
    /*公司规模*/
    new Vue({
        el:"#companyscale",
        data:{
            companyscaleParam:[]
        },
        created:function(){
            var companyscaleAlias=this;
            $.ajax({
                url:"../enterprise/queryCompanyscale",
                type:"post",
                dataType:"json",
                success:function (data) {
                    companyscaleAlias.companyscaleParam=data
                    console.log(data)
                }
            })
        }
    })
</script>

<script>
    layui.use(['form', 'layedit', 'laydate'], function(){
        var form = layui.form
            ,layer = layui.layer
            ,layedit = layui.layedit
            ,laydate = layui.laydate;

        //日期
        laydate.render({
            elem: '#date'
        });
        laydate.render({
            elem: '#date1'
        });

        //创建一个编辑器
        var editIndex = layedit.build('LAY_demo_editor');

        //自定义验证规则
        form.verify({
            title: function(value){
                if(value.length < 5){
                    return '标题至少得5个字符啊';
                }
            }
            ,pass: [/(.+){6,12}$/, '密码必须6到12位']
            ,content: function(value){
                layedit.sync(editIndex);
            }
        });

        //监听指定开关
        form.on('switch(switchTest)', function(data){
            layer.msg('开关checked：'+ (this.checked ? 'true' : 'false'), {
                offset: '6px'
            });
            layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
        });

        //监听提交
        form.on('submit(demo1)', function(data){
            layer.alert(JSON.stringify(data.field), {
                title: '最终的提交信息'
            })
            return false;
        });

        //表单初始赋值
        form.val('example', {
            "username": "贤心" // "name": "value"
            ,"password": "123456"
            ,"interest": 1
            ,"like[write]": true //复选框选中状态
            ,"close": true //开关状态
            ,"sex": "女"
            ,"desc": "我爱 layui"
        })


    });
</script>
<script>
    $(function() {
        var delParent;
        var defaults = {
            fileType: ["jpg", "png", "bmp", "jpeg"],
            // 上传图片支持的格式
            fileSize: 1024 * 1024 * 10 // 上传的图片大小不得超过 10M
        };
        /*点击图片*/
        $(".file").change(function() {
            var idFile = $(this).attr("id");
            var file = document.getElementById(idFile);
            var imgContainer = $(this).parents(".aui-photo");
            //存放图片的父元素
            var fileList = file.files;
            //获取的图片文件
            console.log(fileList + "======filelist=====");
            var input = $(this).parent();
            //文本框的父亲元素
            var imgArr = [];
            //遍历得到的图片
            var numUp = imgContainer.find(".aui-up-section").length;
            var totalNum = numUp + fileList.length;
            //图片总的数量可自定义
            if (fileList.length > 3 || totalNum > 3) {
                alert("你好！上传图片不得超过3张，请重新选择");
                //一次选择上传超过3个  自己定义
            } else if (numUp < 3) {
                fileList = validateUp(fileList);
                for (var i = 0; i < fileList.length; i++) {
                    var imgUrl = window.URL.createObjectURL(fileList[i]);
                    imgArr.push(imgUrl);
                    var $section = $("<section class='aui-up-section fl loading'>");
                    imgContainer.prepend($section);
                    var $span = $("<span class='aui-up-span'>");
                    $span.appendTo($section);

                    var $img0 = $("<img class='aui-close-up-img'>").on("click", function(event) {
                        event.preventDefault();
                        event.stopPropagation();
                        $(".aui-works-mask").show();
                        delParent = $(this).parent();
                    });
                    $img0.attr("src", "img/close.png").appendTo($section);
                    var $img = $("<img class='aui-to-up-img aui-up-clarity'>");
                    $img.attr("src", imgArr[i]);
                    $img.appendTo($section);
                    var $p = $("<p class='img-aui-img-name-p'>");
                    $p.html(fileList[i].name).appendTo($section);
                    var $input = $("<input id='actionId' name='actionId' value='' type='hidden'>");
                    $input.appendTo($section);
                    var $input2 = $("<input id='tags' name='tags' value='' type='hidden'/>");
                    $input2.appendTo($section);

                }
            }
            setTimeout(function() {
                $(".aui-up-section").removeClass("loading");
                $(".aui-to-up-img").removeClass("aui-up-clarity");
            }, 4100);
            numUp = imgContainer.find(".aui-up-section").length;
            if (numUp >= 3) {
                $(this).parent().hide();
            }

            $(this).val("");
        });

        $(".aui-photo").delegate(".aui-close-up-img", "click", function() {
            $(".aui-works-mask").show();
            delParent = $(this).parent();
        });

        $(".aui-accept-ok").click(function() {
            $(".aui-works-mask").hide();
            var numUp = delParent.siblings().length;
            if (numUp < 3) {
                delParent.parent().find(".aui-file-up").show();
            }
            delParent.remove();

        });

        $(".aui-accept-no").click(function() {
            $(".aui-works-mask").hide();
        });


        /*function validateUp(files) {
            var arrFiles = [];
            //替换的文件数组
            for (var i = 0, file; file = files[i]; i++) {
                //获取图片上传的后缀名
                var newStr = file.name.split("").reverse().join("");
                if (newStr.split(".")[0] != null) {
                    var type = newStr.split(".")[0].split("").reverse().join("");
                    console.log(type + "===type===");
                    if (jQuery.inArray(type, defaults.fileType) > -1) {
                        // 符合图片格式，可以上传
                        if (file.size >= defaults.fileSize) {
                            alert(file.size);
                            alert('您这个"' + file.name + '"文件大小过大');
                        } else {
                            arrFiles.push(file);
                        }
                    } else {
                        alert('您这个"' + file.name + '"上传类型不符合');
                    }
                } else {
                    alert('您这个"' + file.name + '"没有类型, 无法识别');
                }
            }
            return arrFiles;
        }*/

    })

</script>

</body>
</html>